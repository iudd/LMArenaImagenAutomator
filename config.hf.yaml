# Hugging Face Space 优化配置
# 此配置针对资源受限的 Space 环境进行了优化

# 日志等级: debug | info | warn | error
logLevel: info

server:
  # 监听端口（会被 start_hf.sh 自动修改为 7860）
  port: 7860
  # 鉴权 API Token (可使用 npm run genkey 生成)
  # 该配置会对 API 接口和 WebUI 生效
  auth: sk-change-me-to-your-secure-key
  # 流式请求心跳设置
  keepalive:
    mode: "comment"

backend:
  pool:
    # 全局调度策略
    strategy: least_busy
    
    # 故障转移配置
    failover:
      enabled: true
      maxRetries: 2
    
    # 浏览器实例列表
    instances:
      # 默认浏览器实例（优化版）
      - name: "browser_default"
        workers:
          - name: "default"
            type: lmarena

  # 适配器专属配置
  adapter:
    gemini_biz:
      entryUrl: ""
    lmarena:
      returnUrl: false

queue:
  # 队列缓冲区大小（减少以降低内存占用）
  queueBuffer: 1
  # 图片数量上限（减少以降低内存占用）
  imageLimit: 3

browser:
  # 浏览器可执行文件路径
  path: ""
  
  # 是否启用无头模式
  # ⚠️ Hugging Face Space 必须使用无头模式以节省资源
  headless: true

  # 站点隔离 (fission.autostart)
  # ⚠️ 关闭此项可显著降低内存占用（从 ~2GB 降至 ~1GB）
  # 风险：可能被极高阶的反爬系统检测到
  fission: false
  
  # 全局代理
  proxy:
    enable: false
    type: http
    host: 127.0.0.1
    port: 7890
